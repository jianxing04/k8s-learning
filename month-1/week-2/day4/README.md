å¥½çš„ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥ç¬¬ 11 å¤©çš„å­¦ä¹ ï¼

åœ¨å‰åå¤©çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨çš„æ˜¯â€œ**éƒ¨ç½²ä»€ä¹ˆ**â€ï¼ˆPodã€Deploymentã€StatefulSetï¼‰å’Œâ€œ**å¦‚ä½•è®¿é—®**â€ï¼ˆServiceã€Ingressï¼‰ã€‚æˆ‘ä»¬ä¸€ç›´è®© Kubernetes è‡ªåŠ¨å†³å®šæŠŠ Pod æ”¾åœ¨å“ªä¸ªå¯ç”¨çš„èŠ‚ç‚¹ï¼ˆNodeï¼‰ä¸Šã€‚

ä½†åœ¨çœŸå®çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé›†ç¾¤å¾€å¾€æ˜¯**å¼‚æ„ (Heterogeneous)** çš„ï¼š

  * æœ‰äº›èŠ‚ç‚¹æ˜¯æ™®é€šæœåŠ¡å™¨ã€‚
  * æœ‰äº›èŠ‚ç‚¹é…å¤‡äº†é«˜æ€§èƒ½çš„ SSD ç¡¬ç›˜ã€‚
  * æœ‰äº›èŠ‚ç‚¹æ‹¥æœ‰æ˜‚è´µçš„ GPU æ˜¾å¡ã€‚
  * æœ‰äº›èŠ‚ç‚¹ä½äºç‰¹å®šçš„ç‰©ç†æœºæ¶æˆ–å¯ç”¨åŒºã€‚

ä»Šå¤©ï¼Œæˆ‘ä»¬å°±è¦å­¦ä¹ å¦‚ä½•æ‰®æ¼”â€œæŒ‡æŒ¥å®˜â€çš„è§’è‰²ï¼Œå‘Šè¯‰ Kubernetes çš„**è°ƒåº¦å™¨ (Scheduler)**ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠç‰¹å®šçš„ Pod **éƒ¨ç½²åˆ°å“ªé‡Œ**ã€‚

-----

### ğŸ¯ **ç›®æ ‡ 11ï¼šç†è§£ Pod æ˜¯æ€ä¹ˆè°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šçš„**

-----

### **å­¦ä¹ å†…å®¹**

#### **1. Kubernetes è°ƒåº¦æµç¨‹ (Scheduling Process)**

å½“ä½  `kubectl apply` ä¸€ä¸ª Pod çš„ YAML æ–‡ä»¶åï¼Œè¿™ä¸ª Pod æœ€åˆå¤„äº `Pending` çŠ¶æ€ã€‚æ­¤æ—¶ï¼Œé›†ç¾¤é‡Œä¸€ä¸ªåä¸º **kube-scheduler** çš„æ ¸å¿ƒç»„ä»¶ä¼šä¸ºå®ƒå¯»æ‰¾ä¸€ä¸ªæœ€åˆé€‚çš„â€œå®¶â€ï¼ˆNodeï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦åˆ†ä¸¤æ­¥ï¼š

1.  **è¿‡æ»¤ (Filtering)**

      * **ç›®çš„**ï¼šç­›é€‰å‡ºæ‰€æœ‰**ä¸èƒ½**è¿è¡Œè¯¥ Pod çš„èŠ‚ç‚¹ï¼Œå¾—åˆ°ä¸€ä¸ªå€™é€‰èŠ‚ç‚¹åˆ—è¡¨ã€‚
      * **è¿‡ç¨‹**ï¼šè°ƒåº¦å™¨ä¼šåƒä¸€ä¸ªä¸¥æ ¼çš„è€ƒå®˜ï¼Œç”¨ä¸€ç³»åˆ—è§„åˆ™ï¼ˆç§°ä¸ºâ€œæ–­è¨€/Predicatesâ€ï¼‰å»æ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹ã€‚ä»»ä½•ä¸æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹éƒ½ä¼šè¢«ç›´æ¥æ·˜æ±°ã€‚
      * **è¿‡æ»¤è§„åˆ™ç¤ºä¾‹**ï¼š
          * èŠ‚ç‚¹èµ„æºæ˜¯å¦è¶³å¤Ÿï¼ˆCPUã€å†…å­˜ï¼‰ï¼Ÿ
          * Pod è¯·æ±‚çš„ç«¯å£åœ¨èŠ‚ç‚¹ä¸Šæ˜¯å¦å·²è¢«å ç”¨ï¼Ÿ
          * èŠ‚ç‚¹æ˜¯å¦æ»¡è¶³ Pod æŒ‡å®šçš„æ ‡ç­¾è¦æ±‚ (`nodeSelector`)ï¼Ÿ
          * èŠ‚ç‚¹æ˜¯å¦æœ‰â€œæ±¡ç‚¹â€(Taint)ï¼Œè€Œ Pod æ˜¯å¦â€œå®¹å¿â€(Toleration) è¿™ä¸ªæ±¡ç‚¹ï¼Ÿ

2.  **æ‰“åˆ† (Scoring)**

      * **ç›®çš„**ï¼šä»å€™é€‰èŠ‚ç‚¹åˆ—è¡¨ä¸­ï¼Œé€‰å‡º**æœ€é€‚åˆ**çš„ä¸€ä¸ªã€‚
      * **è¿‡ç¨‹**ï¼šè°ƒåº¦å™¨ä¼šç»™æ‰€æœ‰é€šè¿‡è¿‡æ»¤é˜¶æ®µçš„å€™é€‰èŠ‚ç‚¹æ‰“åˆ†ã€‚åˆ†æ•°æœ€é«˜çš„èŠ‚ç‚¹èƒœå‡ºï¼ŒPod å°±ä¼šè¢«è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ä¸Šã€‚
      * **æ‰“åˆ†è§„åˆ™ç¤ºä¾‹**ï¼š
          * **èµ„æºæœ€å°‘ä½¿ç”¨ä¼˜å…ˆ**ï¼šå€¾å‘äºå°† Pod éƒ¨ç½²åˆ° CPU å’Œå†…å­˜ä½¿ç”¨ç‡è¾ƒä½çš„èŠ‚ç‚¹ï¼Œä»¥å®ç°è´Ÿè½½å‡è¡¡ã€‚
          * **é•œåƒäº²å’Œæ€§**ï¼šå¦‚æœä¸€ä¸ªèŠ‚ç‚¹ä¸Šå·²ç»æœ‰äº† Pod æ‰€éœ€çš„å®¹å™¨é•œåƒï¼Œé‚£ä¹ˆå®ƒçš„å¾—åˆ†ä¼šæ›´é«˜ï¼ˆå› ä¸ºå¯ä»¥èŠ‚çœæ‹‰å–é•œåƒçš„æ—¶é—´ï¼‰ã€‚
          * **äº²å’Œæ€§/åäº²å’Œæ€§è§„åˆ™**ï¼šæ ¹æ® Pod çš„ `Affinity` è®¾ç½®æ¥æ‰“åˆ†ã€‚

#### **2. `NodeSelector`, `NodeAffinity`, `Taints & Tolerations`**

è¿™æ˜¯æˆ‘ä»¬ç”¨æ¥å½±å“è°ƒåº¦è¿‡ç¨‹çš„ä¸‰ç§ä¸»è¦å·¥å…·ï¼Œå®ƒä»¬çš„è¡¨è¾¾èƒ½åŠ›å’Œä½¿ç”¨åœºæ™¯å„æœ‰ä¸åŒã€‚

  * **`NodeSelector` (èŠ‚ç‚¹é€‰æ‹©å™¨)**

      * **æ˜¯ä»€ä¹ˆ**ï¼šæœ€ç®€å•ã€æœ€ç›´æ¥çš„èŠ‚ç‚¹æŒ‡å®šæ–¹å¼ã€‚
      * **å·¥ä½œæ–¹å¼**ï¼šåœ¨ Pod çš„ `spec` ä¸­æŒ‡å®šä¸€ä¸ª `nodeSelector` å­—æ®µï¼Œå®ƒæ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„ mapã€‚è°ƒåº¦å™¨åªä¼šå°†è¯¥ Pod è°ƒåº¦åˆ°**åŒæ—¶æ‹¥æœ‰æ‰€æœ‰è¿™äº›æ ‡ç­¾ (Label)** çš„èŠ‚ç‚¹ä¸Šã€‚
      * **æ¯”å–»**ï¼šå°±åƒæ˜¯ç§Ÿæˆ¿æ—¶è¯´ï¼šâ€œæˆ‘**åª**è€ƒè™‘å¸¦â€˜ç‹¬ç«‹å«æµ´â€™**å¹¶ä¸”**æ˜¯â€˜æœå—â€™çš„æˆ¿é—´ã€‚â€ æ¡ä»¶æ˜¯å†™æ­»çš„ï¼Œå¿…é¡»å®Œå…¨æ»¡è¶³ã€‚

  * **`NodeAffinity` (èŠ‚ç‚¹äº²å’Œæ€§)**

      * **æ˜¯ä»€ä¹ˆ**ï¼š`NodeSelector` çš„å‡çº§ç‰ˆï¼Œæä¾›äº†æ›´å¼ºå¤§ã€æ›´çµæ´»çš„èŠ‚ç‚¹é€‰æ‹©èƒ½åŠ›ã€‚
      * **å·¥ä½œæ–¹å¼**ï¼šå®ƒæ”¯æŒæ›´ä¸°å¯Œçš„åŒ¹é…è§„åˆ™ï¼ˆå¦‚ `In`, `NotIn`, `Exists`, `DoesNotExist` ç­‰ï¼‰ï¼Œå¹¶ä¸”åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š
        1.  **ç¡¬äº²å’Œæ€§ (`requiredDuringSchedulingIgnoredDuringExecution`)**: **å¿…é¡»æ»¡è¶³**ã€‚è§„åˆ™å’Œ `NodeSelector` ç±»ä¼¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ï¼ŒPod å°±ä¼šä¸€ç›´å¤„äº `Pending` çŠ¶æ€ã€‚
        2.  **è½¯äº²å’Œæ€§ (`preferredDuringSchedulingIgnoredDuringExecution`)**: **å€¾å‘äºæ»¡è¶³**ã€‚è°ƒåº¦å™¨ä¼š**å°½é‡**å¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ï¼Œä½†å¦‚æœæ‰¾ä¸åˆ°ï¼ŒPod ä»ç„¶ä¼šè¢«è°ƒåº¦åˆ°å…¶ä»–ä¸æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ä¸Šã€‚ä½ å¯ä»¥ç»™æ¯ä¸ªåå¥½è®¾ç½®ä¸€ä¸ªæƒé‡ï¼Œæƒé‡è¶Šé«˜çš„åå¥½å¾—åˆ†è¶Šé«˜ã€‚
      * **æ¯”å–»**ï¼š
          * **ç¡¬äº²å’Œæ€§**ï¼šâ€œæˆ‘ç§Ÿæˆ¿**å¿…é¡»**åœ¨â€˜ä¸€å·çº¿â€™**æˆ–**â€˜äºŒå·çº¿â€™åœ°é“æ²¿çº¿ã€‚â€ (ä½¿ç”¨ `In` æ“ä½œç¬¦)
          * **è½¯äº²å’Œæ€§**ï¼šâ€œæˆ‘**æœ€å¥½**èƒ½ç§Ÿåˆ°ä¸€ä¸ªå¸¦â€˜é˜³å°â€™çš„æˆ¿é—´ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå…¶ä»–åˆé€‚çš„ä¹Ÿè¡Œã€‚â€

  * **`Taints & Tolerations` (æ±¡ç‚¹ä¸å®¹å¿)**

      * **æ˜¯ä»€ä¹ˆ**ï¼šè¿™æ˜¯ä¸€ç§**åå‘**çš„è°ƒåº¦æœºåˆ¶ã€‚äº²å’Œæ€§æ˜¯ Pod â€œå¸å¼•â€åˆ° Node ä¸Šï¼Œè€Œæ±¡ç‚¹æ˜¯ Node â€œæ’æ–¥â€ Podã€‚
      * **å·¥ä½œæ–¹å¼**ï¼š
          * **Taint (æ±¡ç‚¹)**: ä½ ç»™ä¸€ä¸ª **Node** æ‰“ä¸Šâ€œæ±¡ç‚¹â€ï¼Œè¿™ä¸ªæ±¡ç‚¹ä¼šæ‹’ç»æ‰€æœ‰ä¸èƒ½â€œå®¹å¿â€å®ƒçš„ Pod è¢«è°ƒåº¦ä¸Šæ¥ã€‚
          * **Toleration (å®¹å¿)**: ä½ åœ¨ **Pod** ä¸Šè®¾ç½®â€œå®¹å¿â€ï¼Œå£°æ˜å®ƒå¯ä»¥å®¹å¿æŸäº›æ±¡ç‚¹ï¼Œè¿™æ ·å®ƒå°±èƒ½å¤Ÿè¢«è°ƒåº¦åˆ°å¸¦æœ‰ç›¸åº”æ±¡ç‚¹çš„èŠ‚ç‚¹ä¸Šã€‚
      * **æ¯”å–»**ï¼šæˆ¿ä¸œï¼ˆNodeï¼‰åœ¨é—¨ä¸Šè´´äº†ä¸€å¼ æ¡ï¼šâ€œæ­¤æˆ¿æ­£åœ¨è£…ä¿®ï¼ˆTaintï¼‰ï¼Œé—²äººå…å…¥ï¼â€ã€‚åªæœ‰æŒæœ‰ç‰¹æ®Šé€šè¡Œè¯ï¼ˆTolerationï¼‰çš„è£…ä¿®å·¥äººï¼ˆPodï¼‰æ‰èƒ½è¿›å…¥ã€‚
      * **å…¸å‹ç”¨é€”**ï¼š
          * **ä¸“ç”¨èŠ‚ç‚¹**ï¼šç»™ GPU èŠ‚ç‚¹æ‰“ä¸Š `gpu=true:NoSchedule` çš„æ±¡ç‚¹ï¼Œè¿™æ ·åªæœ‰æ˜ç¡®éœ€è¦ GPU çš„ Podï¼ˆå¹¶è®¾ç½®äº†ç›¸åº”å®¹å¿ï¼‰æ‰ä¼šè¢«è°ƒåº¦ä¸Šå»ï¼Œé˜²æ­¢æ™®é€šåº”ç”¨å ç”¨æ˜‚è´µçš„ GPU èµ„æºã€‚
          * **èŠ‚ç‚¹ç»´æŠ¤**ï¼šå½“ç®¡ç†å‘˜è¦ç»´æŠ¤ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥å…ˆç»™å®ƒåŠ ä¸Šæ±¡ç‚¹ï¼Œé˜»æ­¢æ–°çš„ Pod è°ƒåº¦ä¸Šæ¥ï¼Œç„¶åå†é©±é€å·²æœ‰ Podã€‚

#### **3. Pod ä¼˜å…ˆçº§ (Pod Priority)**

  * **æ˜¯ä»€ä¹ˆ**ï¼šä¸€ä¸ªå‘Šè¯‰è°ƒåº¦å™¨â€œè¿™ä¸ª Pod æ¯”é‚£ä¸ª Pod æ›´é‡è¦â€çš„æœºåˆ¶ã€‚
  * **å·¥ä½œæ–¹å¼**ï¼šé€šè¿‡ `PriorityClass` èµ„æºå®šä¹‰ä¸åŒçš„ä¼˜å…ˆçº§ã€‚é«˜ä¼˜å…ˆçº§çš„ Pod åœ¨è°ƒåº¦æ—¶ä¼šæ’åœ¨å‰é¢ã€‚å¦‚æœé›†ç¾¤èµ„æºä¸è¶³ï¼Œé«˜ä¼˜å…ˆçº§çš„ Pod ç”šè‡³å¯ä»¥**æŠ¢å  (Preemption)** èŠ‚ç‚¹ä¸Šå·²ç»è¿è¡Œçš„ä½ä¼˜å…ˆçº§ Podï¼ŒæŠŠå®ƒä»¬â€œè¸¢èµ°â€æ¥ä¸ºè‡ªå·±è…¾å‡ºç©ºé—´ã€‚
  * **å…¸å‹ç”¨é€”**ï¼šç¡®ä¿æ ¸å¿ƒç³»ç»Ÿç»„ä»¶ï¼ˆå¦‚ç›‘æ§ã€æ—¥å¿—ä»£ç†ï¼‰çš„è¿è¡Œä¼˜å…ˆçº§é«˜äºæ™®é€šçš„ä¸šåŠ¡åº”ç”¨ã€‚

-----

### **å®æˆ˜ä»»åŠ¡**

**ç¯å¢ƒè¯´æ˜**ï¼šç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å•èŠ‚ç‚¹çš„ Minikube ç¯å¢ƒï¼Œæˆ‘ä»¬æ— æ³•çœŸæ­£â€œé€‰æ‹©â€èŠ‚ç‚¹ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ª**ä¸å­˜åœ¨çš„**æ ‡ç­¾ï¼Œæ¥è§‚å¯Ÿ Pod æ˜¯å¦ä¼šå› ä¸ºä¸æ»¡è¶³æ¡ä»¶è€Œå¡åœ¨ `Pending` çŠ¶æ€ï¼Œä»è€ŒéªŒè¯è°ƒåº¦æœºåˆ¶æ˜¯ç”Ÿæ•ˆçš„ã€‚

#### **ä»»åŠ¡ 1ï¼šç»™ Node æ‰“ Label**

1.  **æŸ¥çœ‹å½“å‰èŠ‚ç‚¹**ï¼š
    `kubectl get nodes`
    ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªåä¸º `minikube` çš„èŠ‚ç‚¹ã€‚

2.  **ç»™ minikube èŠ‚ç‚¹æ‰“ä¸Šæ ‡ç­¾**ï¼š
    æˆ‘ä»¬å°†ç»™å®ƒæ‰“ä¸Šä¸€ä¸ª `disktype=ssd` çš„æ ‡ç­¾ï¼Œå‡è£…å®ƒæ‹¥æœ‰ä¸€å— SSD ç¡¬ç›˜ã€‚
    `kubectl label node minikube disktype=ssd`

3.  **éªŒè¯æ ‡ç­¾**ï¼š
    `kubectl get nodes --show-labels`
    åœ¨è¾“å‡ºçš„ `LABELS` åˆ—ä¸­ï¼Œä»”ç»†æŸ¥æ‰¾ï¼Œä½ ä¼šçœ‹åˆ° `disktype=ssd` å·²ç»æˆåŠŸæ·»åŠ ã€‚

    > **æ¸…ç†æç¤º**ï¼šæœªæ¥å¦‚æœæƒ³ç§»é™¤è¿™ä¸ªæ ‡ç­¾ï¼Œå¯ä»¥æ‰§è¡Œ `kubectl label node minikube disktype-`ã€‚

-----

#### **ä»»åŠ¡ 2ï¼šä½¿ç”¨ `nodeSelector` è°ƒåº¦ Pod**

1.  **ç¼–å†™ `nodeselector-pod.yaml` æ–‡ä»¶**:

    ```yaml
    apiVersion: v1
    kind: Pod
    metadata:
      name: nodeselector-pod
    spec:
      containers:
      - name: nginx
        image: nginx
      # --- å…³é”®éƒ¨åˆ† ---
      nodeSelector:
        disktype: ssd
    ```

    è¿™ä¸ª Pod å£°æ˜äº†å®ƒâ€œåªå»â€å¸¦æœ‰ `disktype=ssd` æ ‡ç­¾çš„èŠ‚ç‚¹ã€‚

2.  **éƒ¨ç½²å¹¶éªŒè¯ (æˆåŠŸæ¡ˆä¾‹)**ï¼š
    `kubectl apply -f nodeselector-pod.yaml`
    `kubectl get pods -o wide`
    å› ä¸ºæˆ‘ä»¬çš„ `minikube` èŠ‚ç‚¹æ­£å¥½æœ‰è¿™ä¸ªæ ‡ç­¾ï¼Œæ‰€ä»¥ Pod ä¼šç«‹åˆ»è¢«æˆåŠŸè°ƒåº¦ï¼Œå¹¶è¿›å…¥ `Running` çŠ¶æ€ã€‚

3.  **åˆ¶é€ å¤±è´¥æ¡ˆä¾‹æ¥åŠ æ·±ç†è§£**ï¼š

      * å…ˆåˆ é™¤åˆšæ‰çš„ Pod: `kubectl delete pod nodeselector-pod`
      * ä¿®æ”¹ `nodeselector-pod.yaml`ï¼Œå°† `ssd` æ”¹ä¸ºä¸€ä¸ªä¸å­˜åœ¨çš„æ ‡ç­¾å€¼ï¼Œæ¯”å¦‚ `hdd`ã€‚
        ```yaml
        nodeSelector:
          disktype: hdd
        ```
      * å†æ¬¡éƒ¨ç½²: `kubectl apply -f nodeselector-pod.yaml`
      * æŸ¥çœ‹çŠ¶æ€: `kubectl get pods`ï¼Œä½ ä¼šå‘ç° `nodeselector-pod` ä¸€ç›´å¡åœ¨ **`Pending`** çŠ¶æ€ï¼
      * æŸ¥çœ‹åŸå› : `kubectl describe pod nodeselector-pod`
        åœ¨è¾“å‡ºçš„ `Events` éƒ¨åˆ†ï¼Œä½ ä¼šçœ‹åˆ°ä¸€æ¡éå¸¸æ˜ç¡®çš„æ¶ˆæ¯ï¼Œç±»ä¼¼ï¼š
        `Warning  FailedScheduling  ... 0/1 nodes are available: 1 node(s) didn't match node selector.`
        è¿™å®Œç¾åœ°è¯æ˜äº† `nodeSelector` çš„å¼ºåˆ¶çº¦æŸä½œç”¨ã€‚

-----

#### **ä»»åŠ¡ 3ï¼šä½¿ç”¨ `nodeAffinity` è°ƒåº¦ Pod**

1.  **ç¼–å†™ `nodeaffinity-pod.yaml` æ–‡ä»¶**:
    æˆ‘ä»¬å°†ä½¿ç”¨â€œç¡¬äº²å’Œæ€§â€ï¼Œè¦æ±‚èŠ‚ç‚¹å¿…é¡»æœ‰ä¸€ä¸ª `disktype` æ ‡ç­¾ï¼Œå¹¶ä¸”å…¶å€¼æ˜¯ `ssd` æˆ– `nvme` ä¸­çš„ä¸€ä¸ªã€‚

    ```yaml
    apiVersion: v1
    kind: Pod
    metadata:
      name: nodeaffinity-pod
    spec:
      containers:
      - name: nginx
        image: nginx
      # --- å…³é”®éƒ¨åˆ† ---
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution: # ç¡¬äº²å’Œæ€§
            nodeSelectorTerms:
            - matchExpressions:
              - key: disktype
                operator: In # æ“ä½œç¬¦ï¼šIn (å€¼åœ¨åˆ—è¡¨ä¸­)
                values:
                - ssd
                - nvme
    ```

2.  **éƒ¨ç½²å¹¶éªŒè¯**ï¼š

      * å…ˆåˆ é™¤ä¸Šä¸€æ­¥å¤±è´¥çš„ Pod: `kubectl delete pod nodeselector-pod`
      * éƒ¨ç½²æ–° Pod: `kubectl apply -f nodeaffinity-pod.yaml`
      * æŸ¥çœ‹çŠ¶æ€: `kubectl get pods -o wide`
        å› ä¸º `minikube` èŠ‚ç‚¹çš„ `disktype` æ˜¯ `ssd`ï¼Œæ»¡è¶³ `In [ssd, nvme]` è¿™ä¸ªæ¡ä»¶ï¼Œæ‰€ä»¥ Pod ä¼šè¢«æˆåŠŸè°ƒåº¦ã€‚è¿™è¯æ˜äº† `nodeAffinity` åŒæ ·å¯ä»¥å®ç°å¼ºåˆ¶çº¦æŸï¼Œå¹¶ä¸”è¡¨è¾¾èƒ½åŠ›æ›´å¼ºã€‚

-----

### **æ¸…ç†ç¯å¢ƒ**

```bash
kubectl delete pod nodeaffinity-pod
# å¦‚æœä¹‹å‰é‚£ä¸ª pending çš„ pod è¿˜åœ¨ï¼Œä¹Ÿä¸€å¹¶åˆ é™¤
kubectl delete pod nodeselector-pod
# ç§»é™¤æˆ‘ä»¬æ·»åŠ çš„æ ‡ç­¾
kubectl label node minikube disktype-
```

-----

### **æœ¬æ—¥æ€»ç»“**

ä»Šå¤©ï¼Œä½ æŒæ¡äº† Kubernetes è°ƒåº¦å™¨çš„åŸºæœ¬å·¥ä½œåŸç†ï¼Œå¹¶å­¦ä¼šäº†å¦‚ä½•å½±å“å®ƒçš„å†³ç­–ï¼š

1.  **ç†è§£äº†è°ƒåº¦åˆ†ä¸ºâ€œè¿‡æ»¤â€å’Œâ€œæ‰“åˆ†â€ä¸¤ä¸ªé˜¶æ®µ**ã€‚
2.  **æŒæ¡äº† `NodeSelector`**ï¼šä¸€ç§ç®€å•ç›´æ¥çš„ã€åŸºäºæ ‡ç­¾çš„ç¡¬æ€§è°ƒåº¦çº¦æŸã€‚
3.  **æŒæ¡äº† `NodeAffinity`**ï¼šä¸€ç§æ›´å¼ºå¤§ã€æ›´å…·è¡¨è¾¾åŠ›çš„è°ƒåº¦çº¦æŸï¼Œæ”¯æŒè½¯ç¡¬ä¸¤ç§äº²å’Œæ€§ã€‚
4.  **ç†è§£äº† `Taints & Tolerations` çš„æ¦‚å¿µ**ï¼šä¸€ç§åå‘çš„ã€ç”±èŠ‚ç‚¹æ’æ–¥ Pod çš„è°ƒåº¦æ§åˆ¶æœºåˆ¶ã€‚

ç°åœ¨ï¼Œä½ ä¸ä»…èƒ½å†³å®šè¦éƒ¨ç½²ä»€ä¹ˆåº”ç”¨ï¼Œè¿˜èƒ½ç²¾ç»†åœ°æ§åˆ¶å®ƒä»¬åº”è¯¥è¿è¡Œåœ¨å“ªäº›å…·æœ‰ç‰¹å®šèƒ½åŠ›çš„èŠ‚ç‚¹ä¸Šï¼Œè¿™å¯¹äºç®¡ç†ä¸€ä¸ªå¤æ‚çš„ã€å¼‚æ„çš„ç”Ÿäº§é›†ç¾¤è‡³å…³é‡è¦ã€‚