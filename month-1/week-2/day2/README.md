æ¬¢è¿æ¥åˆ° Day 9ï¼

åœ¨ Day 8ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•é€šè¿‡ ConfigMap å’Œ Secret å°†**é…ç½®æ•°æ®**æ³¨å…¥åˆ° Pod ä¸­ï¼Œå…¶ä¸­ä¸€ç§æ–¹å¼å°±æ˜¯é€šè¿‡ Volume æ–‡ä»¶æŒ‚è½½ã€‚è¿™ä¸ºä½ ä»Šå¤©æ·±å…¥ç†è§£ Kubernetes çš„å­˜å‚¨æ ¸å¿ƒâ€”â€”**Volume**â€”â€”æ‰“ä¸‹äº†åŸºç¡€ã€‚

å®¹å™¨ç”Ÿæ¥æ˜¯**æ— çŠ¶æ€ (Stateless)** çš„ï¼Œå®ƒä»¬çš„æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸´æ—¶çš„ã€‚å½“å®¹å™¨å´©æºƒæˆ– Pod è¢«é”€æ¯æ—¶ï¼Œå…¶ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚ä½†ç°å®ä¸­çš„åº”ç”¨ï¼ˆå¦‚æ•°æ®åº“ã€æ–‡ä»¶æœåŠ¡å™¨ã€ç”¨æˆ·ä¸Šä¼ å†…å®¹ç­‰ï¼‰éƒ½éœ€è¦**æŒä¹…åŒ– (Persistence)** çš„æ•°æ®ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥è§£å†³è¿™ä¸ªè‡³å…³é‡è¦çš„é—®é¢˜ã€‚

-----

### ğŸ¯ **ç›®æ ‡ 9ï¼šç†è§£å­˜å‚¨å·çš„æ¦‚å¿µï¼ŒæŒæ¡ Pod çš„æŒä¹…åŒ–**

-----

### **å­¦ä¹ å†…å®¹**

#### **1. Volumeï¼šPod ç”Ÿå‘½å‘¨æœŸå†…å…±äº«æ•°æ®**

é¦–å…ˆï¼Œè¦ç†è§£ Volume çš„æ ¸å¿ƒæ¦‚å¿µï¼š
ä¸€ä¸ª Kubernetes Volume æ˜¯ä¸€ä¸ª**ç‹¬ç«‹äºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿ**çš„æ•°æ®ç›®å½•ï¼Œå®ƒå¯ä»¥è¢« Pod ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨æŒ‚è½½å’Œè®¿é—®ã€‚

**æ ¸å¿ƒç‰¹æ€§**ï¼š

  * **æ•°æ®å…±äº«**ï¼šåŒä¸€ä¸ª Volume å¯ä»¥è¢«ä¸€ä¸ª Pod å†…çš„å¤šä¸ªå®¹å™¨åŒæ—¶æŒ‚è½½ï¼Œæ˜¯å®ç°å®¹å™¨é—´æ–‡ä»¶å…±äº«çš„ä¸»è¦æ–¹å¼ã€‚
  * **ç”Ÿå‘½å‘¨æœŸ**ï¼šVolume çš„ç”Ÿå‘½å‘¨æœŸä¸**å®ƒæ‰€åœ¨çš„ Pod**ç»‘å®šã€‚åªè¦ Pod å­˜åœ¨ï¼ŒVolume å°±ä¼šå­˜åœ¨ï¼Œå³ä½¿é‡Œé¢çš„æŸä¸ªå®¹å™¨å´©æºƒé‡å¯ï¼ŒVolume ä¸­çš„æ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚**ä½†æ˜¯ï¼Œå¦‚æœ Pod è¢«åˆ é™¤ï¼ŒVolumeï¼ˆä»¥åŠå…¶ä¸­æ•°æ®ï¼‰é€šå¸¸ä¹Ÿä¼šè¢«é”€æ¯**ï¼ˆé™¤éæ˜¯æŒä¹…åŒ–ç±»å‹çš„ Volumeï¼‰ã€‚

> **æ¯”å–»**ï¼šVolume å°±åƒæ˜¯æŒ‚è½½åœ¨ Pod ä¸Šçš„ä¸€ä¸ªâ€œå…±äº«Uç›˜â€ã€‚Pod é‡Œçš„æ‰€æœ‰å®¹å™¨éƒ½å¯ä»¥è¯»å†™è¿™ä¸ªUç›˜ã€‚åªè¦ Pod æ²¡è¢«é”€æ¯ï¼Œè¿™ä¸ªUç›˜å°±ä¸€ç›´æ’åœ¨ä¸Šé¢ï¼Œæ•°æ®å°±ä¸ä¼šä¸¢ã€‚

#### **2. `emptyDir` ä¸ `hostPath` å·**

Kubernetes æ”¯æŒå¤šç§ç±»å‹çš„ Volumeï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸¤ç§æœ€åŸºç¡€çš„ï¼š

  * **`emptyDir`**

      * **æ˜¯ä»€ä¹ˆ**ï¼šä¸€ä¸ªä¸´æ—¶çš„ç©ºç›®å½•ã€‚å½“ Pod è¢«åˆ†é…åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šæ—¶ï¼ŒKubernetes ä¼šä¸ºå®ƒåˆ›å»ºä¸€ä¸ª `emptyDir` å·ï¼ŒPod å†…çš„å®¹å™¨å¯ä»¥è¯»å†™è¿™ä¸ªç›®å½•ã€‚
      * **ç”Ÿå‘½å‘¨æœŸ**ï¼šå®Œå…¨ç­‰åŒäº Pod çš„ç”Ÿå‘½å‘¨æœŸã€‚**å½“ Pod å› ä»»ä½•åŸå› è¢«åˆ é™¤æ—¶ï¼Œ`emptyDir` ä¸­çš„æ•°æ®å°†æ°¸ä¹…ä¸¢å¤±**ã€‚
      * **å…¸å‹ç”¨é€”**ï¼š
        1.  **å®¹å™¨é—´å…±äº«æ–‡ä»¶ï¼ˆæˆ‘ä»¬ä»Šå¤©çš„å®æˆ˜ï¼‰**ï¼šä¸€ä¸ªå®¹å™¨å‘ `emptyDir` å†™æ•°æ®ï¼Œå¦ä¸€ä¸ªå®¹å™¨ä»ä¸­è¯»å–ã€‚
        2.  **ä¸´æ—¶æš‚å­˜ç©ºé—´**ï¼šä½œä¸ºåº”ç”¨è¿è¡Œæ—¶çš„ä¸´æ—¶ç¼“å­˜æˆ–æ’åºç©ºé—´ã€‚

  * **`hostPath`**

      * **æ˜¯ä»€ä¹ˆ**ï¼šå°†\*\*å®¿ä¸»èŠ‚ç‚¹ï¼ˆNodeï¼‰\*\*ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œç›´æ¥æŒ‚è½½åˆ° Pod çš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚
      * **ç”Ÿå‘½å‘¨æœŸ**ï¼šæ•°æ®å­˜å‚¨åœ¨èŠ‚ç‚¹ä¸Šï¼Œå¦‚æœ Pod è¢«åˆ é™¤å¹¶é‡æ–°åˆ›å»ºï¼ˆå³ä½¿åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼‰ï¼Œæ•°æ®ä¾ç„¶å­˜åœ¨ã€‚
      * **âš ï¸ è­¦å‘Š**ï¼šè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§ä½†å±é™©çš„åŠŸèƒ½ï¼Œ**ä¸æ¨èç”¨äºç»å¤§å¤šæ•°åº”ç”¨**ã€‚å› ä¸ºå®ƒç ´åäº† Pod ä¸èŠ‚ç‚¹çš„è§£è€¦ï¼Œä½ çš„åº”ç”¨è¢«â€œé’‰æ­»â€åœ¨äº†æŸä¸ªç‰¹å®šçš„èŠ‚ç‚¹ä¸Šã€‚å¦‚æœ Pod è¢«è°ƒåº¦åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œæ•°æ®å°±è®¿é—®ä¸åˆ°äº†ã€‚
      * **å…¸å‹ç”¨é€”**ï¼šç”¨äºéœ€è¦è¯»å–æˆ–ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯çš„ç³»ç»Ÿçº§åº”ç”¨ï¼Œæ¯”å¦‚ç›‘æ§ Agentï¼ˆè¯»å–èŠ‚ç‚¹æ—¥å¿—ï¼‰ã€ç½‘ç»œæ’ä»¶ç­‰ã€‚

#### **3. PersistentVolume (PV) ä¸ PersistentVolumeClaim (PVC)**

`emptyDir` å’Œ `hostPath` éƒ½æ— æ³•æ»¡è¶³åº”ç”¨æ•°æ®åœ¨ Pod é”€æ¯åä¾ç„¶å­˜åœ¨çš„â€œæŒä¹…åŒ–â€éœ€æ±‚ã€‚ä¸ºæ­¤ï¼ŒKubernetes è®¾è®¡äº†ä¸€å¥—å¼ºå¤§çš„æŠ½è±¡æœºåˆ¶ï¼šPV å’Œ PVCã€‚

è¿™å¥—æœºåˆ¶å°†â€œå­˜å‚¨èµ„æºçš„ç®¡ç†â€å’Œâ€œå­˜å‚¨èµ„æºçš„ä½¿ç”¨â€è¿™ä¸¤ä¸ªè§’è‰²å®Œç¾åœ°åˆ†ç¦»å¼€æ¥ã€‚

  * **PersistentVolume (PV) - æŒä¹…å·**

      * **è§’è‰²**ï¼š**â€œå­˜å‚¨èµ„æºâ€**ï¼Œç”±**é›†ç¾¤ç®¡ç†å‘˜ (Administrator)** åˆ›å»ºå’Œç®¡ç†ã€‚
      * **æ˜¯ä»€ä¹ˆ**ï¼šä»£è¡¨é›†ç¾¤ä¸­ä¸€å—å·²ç»å­˜åœ¨çš„ç½‘ç»œå­˜å‚¨ï¼ˆå¦‚ NFSã€Cephã€äº‘æœåŠ¡å•†çš„ç£ç›˜ç­‰ï¼‰ã€‚å®ƒå’Œå…·ä½“çš„ Pod æ²¡æœ‰å…³ç³»ï¼Œæ˜¯é›†ç¾¤çº§åˆ«çš„èµ„æºã€‚PV æ‹¥æœ‰ç‹¬ç«‹äºä»»ä½• Pod çš„ç”Ÿå‘½å‘¨æœŸã€‚
      * **æ¯”å–»**ï¼šPV å°±åƒæ˜¯ITéƒ¨é—¨æå‰é‡‡è´­å¥½çš„ä¸€æ‰¹\*\*â€œç§»åŠ¨ç¡¬ç›˜â€\*\*ï¼Œæ”¾åœ¨ä»“åº“é‡Œï¼Œæ¯ä¸ªç¡¬ç›˜éƒ½æœ‰è‡ªå·±çš„å®¹é‡ï¼ˆ10GBï¼‰ã€é€Ÿåº¦ï¼ˆSSDï¼‰ã€æ¥å£ç±»å‹ï¼ˆè¯»å†™æ¨¡å¼ï¼‰ç­‰è§„æ ¼ã€‚

  * **PersistentVolumeClaim (PVC) - æŒä¹…å·å£°æ˜**

      * **è§’è‰²**ï¼š**â€œå­˜å‚¨è¯·æ±‚â€**ï¼Œç”±**åº”ç”¨å¼€å‘è€… (Developer)** åˆ›å»ºå’Œä½¿ç”¨ã€‚
      * **æ˜¯ä»€ä¹ˆ**ï¼šç”¨æˆ·å¯¹å­˜å‚¨èµ„æºçš„ä¸€æ¬¡ç”³è¯·ã€‚å¼€å‘è€…åœ¨ PVC ä¸­å£°æ˜è‡ªå·±éœ€è¦å¤šå¤§çš„ç©ºé—´ã€ä»€ä¹ˆæ ·çš„è¯»å†™æƒé™ç­‰ï¼Œè€Œ**ä¸å…³å¿ƒ**è¿™äº›å­˜å‚¨å…·ä½“æ¥è‡ªå“ªé‡Œã€‚
      * **æ¯”å–»**ï¼šPVC å°±åƒæ˜¯ä½ ï¼ˆå¼€å‘è€…ï¼‰å¡«å†™çš„ä¸€å¼ \*\*â€œç§»åŠ¨ç¡¬ç›˜é¢†ç”¨ç”³è¯·å•â€\*\*ï¼šâ€œæˆ‘éœ€è¦ä¸€ä¸ªè‡³å°‘ 1GBã€å¯ä»¥å•äººè¯»å†™çš„ç¡¬ç›˜ã€‚â€

**å·¥ä½œæµç¨‹ (åŠ¨æ€ä¾›ç»™ - Dynamic Provisioning)**:
åœ¨ç°ä»£ Kubernetes é›†ç¾¤ä¸­ï¼ˆåŒ…æ‹¬ Minikubeï¼‰ï¼Œé€šå¸¸ä¼šé…ç½®ä¸€ä¸ª `StorageClass` æ¥å®ç°**åŠ¨æ€ä¾›ç»™**ã€‚

1.  å¼€å‘è€…åˆ›å»ºä¸€ä¸ª PVC (æäº¤ç”³è¯·å•)ã€‚
2.  Kubernetes çœ‹åˆ°è¿™ä¸ª PVCï¼Œä¼šé€šè¿‡ `StorageClass` çš„é…ç½®ï¼Œ**è‡ªåŠ¨åœ°**åœ¨åº•å±‚å­˜å‚¨ç³»ç»Ÿï¼ˆå¦‚äº‘ç¡¬ç›˜ï¼‰ä¸­åˆ›å»ºä¸€ä¸ªç¬¦åˆè¦æ±‚çš„ PV (è‡ªåŠ¨ä»ä»“åº“æ‹¿ä¸€ä¸ªæ–°ç¡¬ç›˜)ã€‚
3.  è¿™ä¸ªæ–°åˆ›å»ºçš„ PV ä¼šè‡ªåŠ¨ä¸å¼€å‘è€…çš„ PVC **ç»‘å®š (Bound)**ã€‚
4.  å¼€å‘è€…åœ¨è‡ªå·±çš„ Pod ä¸­ï¼Œåªéœ€è¦å¼•ç”¨ PVC çš„åå­—ï¼Œå°±å¯ä»¥åƒä½¿ç”¨æ™®é€š Volume ä¸€æ ·ï¼Œå°†è¿™å—æŒä¹…åŒ–å­˜å‚¨æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚

> **æ ¸å¿ƒæ€æƒ³**ï¼šå¼€å‘è€…åªéœ€è¦å…³å¿ƒâ€œæˆ‘éœ€è¦ä»€ä¹ˆæ ·çš„å­˜å‚¨â€(PVC)ï¼Œè€Œæ— éœ€å…³å¿ƒâ€œå­˜å‚¨åˆ°åº•ä»å“ªé‡Œæ¥â€(PV)ã€‚è¿™å¤§å¤§ç®€åŒ–äº†åº”ç”¨å¼€å‘å’Œéƒ¨ç½²çš„å¤æ‚åº¦ã€‚

-----

### **å®æˆ˜ä»»åŠ¡**

#### **ä»»åŠ¡ 1ï¼šä½¿ç”¨ `emptyDir` å·å…±äº«æ–‡ä»¶**

**åœºæ™¯**ï¼šåˆ›å»ºä¸€ä¸ª Podï¼ŒåŒ…å«ä¸¤ä¸ªå®¹å™¨ã€‚ä¸€ä¸ªå®¹å™¨ï¼ˆ`writer`ï¼‰æ¯ç§’å‘å…±äº«ç›®å½•å†™å…¥å½“å‰æ—¶é—´ï¼Œå¦ä¸€ä¸ªå®¹å™¨ï¼ˆ`reader`ï¼‰æ¯ç§’ä»è¯¥ç›®å½•è¯»å–å¹¶æ˜¾ç¤ºæ—¶é—´ã€‚

1.  **åˆ›å»º `emptydir-pod.yaml` æ–‡ä»¶**ï¼š

    ```yaml
    apiVersion: v1
    kind: Pod
    metadata:
      name: emptydir-demo-pod
    spec:
      # 1. åœ¨ Pod å±‚é¢å®šä¹‰ä¸€ä¸ª emptyDir ç±»å‹çš„ Volume
      volumes:
      - name: shared-data
        emptyDir: {}

      containers:
      # 2. ç¬¬ä¸€ä¸ªå®¹å™¨ï¼šå†™å…¥è€…
      - name: writer
        image: busybox:1.35
        command: ["/bin/sh", "-c", "while true; do echo $(date) > /data/time.txt; sleep 1; done"]
        # 3. å°† Volume æŒ‚è½½åˆ°å®¹å™¨çš„ /data ç›®å½•
        volumeMounts:
        - name: shared-data
          mountPath: /data

      # 4. ç¬¬äºŒä¸ªå®¹å™¨ï¼šè¯»å–è€…
      - name: reader
        image: busybox:1.35
        command: ["/bin/sh", "-c", "while true; do cat /data/time.txt; sleep 1; done"]
        # 5. å°†åŒä¸€ä¸ª Volume ä¹ŸæŒ‚è½½åˆ°è‡ªå·±çš„ /data ç›®å½•
        volumeMounts:
        - name: shared-data
          mountPath: /data
    ```

2.  **éƒ¨ç½²å¹¶éªŒè¯**ï¼š
    `kubectl apply -f emptydir-pod.yaml`
    å®æ—¶æŸ¥çœ‹ `reader` å®¹å™¨çš„æ—¥å¿—ï¼š
    `kubectl logs emptydir-demo-pod -c reader --follow`

    ä½ ä¼šçœ‹åˆ°ï¼Œå±å¹•ä¸Šä¼šå®æ—¶åˆ·æ–°ç”± `writer` å®¹å™¨å†™å…¥çš„æ—¶é—´æˆ³ï¼Œè¯æ˜ä¸¤ä¸ªå®¹å™¨é€šè¿‡ `emptyDir` æˆåŠŸå…±äº«äº†æ–‡ä»¶ã€‚

-----

#### **ä»»åŠ¡ 2 & 3ï¼šä½¿ç”¨ PVC æŒä¹…åŒ– Nginx é™æ€é¡µé¢**

**åœºæ™¯**ï¼šæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª PVCï¼ŒæŠŠå®ƒæŒ‚è½½åˆ° Nginx Pod çš„ç½‘ç«™æ ¹ç›®å½•ã€‚ç„¶åæˆ‘ä»¬åœ¨é‡Œé¢å†™å…¥ä¸€ä¸ªè‡ªå®šä¹‰é¦–é¡µã€‚æ¥ç€åˆ é™¤ Pod å†é‡å»ºï¼ŒéªŒè¯é¦–é¡µæ–‡ä»¶æ˜¯å¦ä¾ç„¶å­˜åœ¨ã€‚

1.  **ç¬¬ A æ­¥: åˆ›å»º PVC (æäº¤â€œç¡¬ç›˜ç”³è¯·å•â€)**
    æ–°å»º `my-pvc.yaml` æ–‡ä»¶ï¼š

    ```yaml
    apiVersion: v1
    kind: PersistentVolumeClaim
    metadata:
      name: my-nginx-pvc
    spec:
      accessModes:
        - ReadWriteOnce # ç”³è¯·çš„è¯»å†™æ¨¡å¼ï¼šå•èŠ‚ç‚¹è¯»å†™
      resources:
        requests:
          storage: 1Gi # ç”³è¯·çš„å­˜å‚¨ç©ºé—´å¤§å°ï¼š1 GiB
      # storageClassName: standard # åœ¨ Minikube ä¸­å¯ä»¥ä¸å†™ï¼Œå®ƒä¼šä½¿ç”¨é»˜è®¤çš„
    ```

    åº”ç”¨å®ƒï¼š `kubectl apply -f my-pvc.yaml`
    æŸ¥çœ‹çŠ¶æ€ï¼š`kubectl get pvc`ï¼Œä½ ä¼šçœ‹åˆ°å®ƒçš„çŠ¶æ€å¾ˆå¿«ä» `Pending` å˜ä¸º `Bound`ã€‚

2.  **ç¬¬ B æ­¥: åˆ›å»ºä½¿ç”¨ PVC çš„ Pod**
    æ–°å»º `nginx-pvc-pod.yaml`ï¼š

    ```yaml
    apiVersion: v1
    kind: Pod
    metadata:
      name: nginx-pvc-pod
    spec:
      volumes:
        # å®šä¹‰ä¸€ä¸ª Volumeï¼Œå®ƒçš„ç±»å‹æ˜¯ PVC
        - name: nginx-storage
          persistentVolumeClaim:
            claimName: my-nginx-pvc # å¼•ç”¨æˆ‘ä»¬ä¸Šä¸€æ­¥åˆ›å»ºçš„ PVC
      containers:
      - name: nginx
        image: nginx:1.24
        ports:
        - containerPort: 80
        # å°†è¿™ä¸ª Volume æŒ‚è½½åˆ° Nginx çš„ç½‘ç«™æ ¹ç›®å½•
        volumeMounts:
        - name: nginx-storage
          mountPath: /usr/share/nginx/html
    ```

    åº”ç”¨å®ƒï¼š `kubectl apply -f nginx-pvc-pod.yaml`

3.  **ç¬¬ C æ­¥: å‘æŒä¹…å·å†™å…¥æ•°æ®**
    `kubectl exec -it nginx-pvc-pod -- /bin/bash`
    è¿›å…¥ Pod çš„ shell åï¼Œå†™å…¥ä¸€ä¸ªè‡ªå®šä¹‰çš„ `index.html`ï¼š
    `echo '<h1>Hello from Persistent Volume!</h1>' > /usr/share/nginx/html/index.html`
    è¾“å…¥ `exit` é€€å‡ºã€‚
    å¯ä»¥é€šè¿‡ç«¯å£è½¬å‘éªŒè¯ä¸€ä¸‹é¡µé¢å†…å®¹ï¼š
    `kubectl port-forward nginx-pvc-pod 8080:80`
    ç„¶ååœ¨å¦ä¸€ä¸ªç»ˆç«¯ `curl localhost:8080`ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°æˆ‘ä»¬å†™å…¥çš„ HTMLã€‚

4.  **ç¬¬ D æ­¥: è§è¯å¥‡è¿¹ - åˆ é™¤å¹¶é‡å»º Pod**
    åˆ é™¤ Podï¼š
    `kubectl delete pod nginx-pvc-pod`
    ç¡®è®¤ Pod å·²è¢«åˆ é™¤ã€‚æ­¤æ—¶ï¼Œ**å…³é”®åœ¨äº**ï¼Œæˆ‘ä»¬çš„ PVC ä¾ç„¶å­˜åœ¨ï¼š `kubectl get pvc`ï¼Œä½ ä¼šçœ‹åˆ° `my-nginx-pvc` è¿˜åœ¨ã€‚

    ç°åœ¨ï¼Œ**é‡æ–°åˆ›å»ºå®Œå…¨ç›¸åŒçš„ Pod**ï¼š
    `kubectl apply -f nginx-pvc-pod.yaml`

5.  **ç¬¬ E æ­¥: éªŒè¯æ•°æ®æ˜¯å¦è¿˜åœ¨**
    ç­‰å¾…æ–°çš„ Pod å˜ä¸º `Running` çŠ¶æ€ã€‚
    å†æ¬¡è®¾ç½®ç«¯å£è½¬å‘ï¼š
    `kubectl port-forward nginx-pvc-pod 8080:80`
    å†æ¬¡ `curl localhost:8080`...

    ä½ å°†å†æ¬¡çœ‹åˆ° **"Hello from Persistent Volume\!"**ã€‚æ•°æ®å®Œç¾åœ°ä¿ç•™äº†ä¸‹æ¥ï¼è¿™è¯æ˜äº† PV/PVC æœºåˆ¶æˆåŠŸåœ°å°†æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸä¸ Pod çš„ç”Ÿå‘½å‘¨æœŸåˆ†ç¦»å¼€æ¥ã€‚

-----

### **æ¸…ç†ç¯å¢ƒ**

```bash
kubectl delete pod emptydir-demo-pod
kubectl delete pod nginx-pvc-pod
kubectl delete pvc my-nginx-pvc # åˆ é™¤ PVC ä¼šè§¦å‘åŠ¨æ€ä¾›ç»™çš„ PV è¢«è‡ªåŠ¨å›æ”¶åˆ é™¤
```

-----

### **æœ¬æ—¥æ€»ç»“**

ä»Šå¤©ï¼Œä½ æŒæ¡äº† Kubernetes ä¸­è‡³å…³é‡è¦çš„å­˜å‚¨æ¦‚å¿µï¼š

1.  **ç†è§£äº† Volume çš„åŸºæœ¬ä½œç”¨**ï¼šä¸º Pod å†…çš„å®¹å™¨æä¾›å…±äº«å’Œä¸´æ—¶å­˜å‚¨ã€‚
2.  **æŒæ¡äº† `emptyDir` çš„ç”¨æ³•**ï¼šé€‚ç”¨äº Pod å†…çš„ä¸´æ—¶æ•°æ®äº¤æ¢ã€‚
3.  **å½»åº•ç†è§£äº† PV å’Œ PVC çš„æŠ½è±¡æœºåˆ¶**ï¼šè¿™æ˜¯ Kubernetes å®ç°æŒä¹…åŒ–å­˜å‚¨çš„æ ¸å¿ƒï¼Œé€šè¿‡å°†â€œå­˜å‚¨å®ç°â€ä¸â€œå­˜å‚¨æ¶ˆè´¹â€è§£è€¦ï¼Œæä¾›äº†æå¤§çš„çµæ´»æ€§å’Œå¯ç§»æ¤æ€§ã€‚
4.  **äº²æ‰‹éªŒè¯äº†ä½¿ç”¨ PVC çš„æ•°æ®å¯ä»¥è·¨è¶Š Pod çš„ç”Ÿæ­»è€ŒæŒä¹…å­˜åœ¨**ã€‚

æŒæ¡äº†æŒä¹…åŒ–å­˜å‚¨ï¼Œä½ å°±è§£é”äº†åœ¨ Kubernetes ä¸Šè¿è¡Œ**æœ‰çŠ¶æ€åº”ç”¨ (Stateful Applications)**ï¼ˆå¦‚æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰çš„èƒ½åŠ›ã€‚æ˜å¤©ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¸“é—¨ä¸ºè¿™ç±»åº”ç”¨è®¾è®¡çš„æ§åˆ¶å™¨ï¼š**StatefulSet**ã€‚